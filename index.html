<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ€è€ƒæ³•è¨ºæ–­ãƒ„ãƒ¼ãƒ«</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/recharts/2.5.0/Recharts.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useRef } = React;
    const { RadarChart, PolarGrid, PolarAngleAxis, PolarRadiusAxis, Radar, ResponsiveContainer } = Recharts;

    // Lucide icons as SVG components
    const Brain = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
      </svg>
    );

    const ArrowRight = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
      </svg>
    );

    const RefreshCw = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
      </svg>
    );

    const Download = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
      </svg>
    );

    const ThinkingStyleAssessment = () => {
      const [currentQuestion, setCurrentQuestion] = useState(0);
      const [answers, setAnswers] = useState({});
      const [showResult, setShowResult] = useState(false);
      const resultRef = useRef(null);

      const questions = [
        { id: 1, text: "è¤‡é›‘ãªå•é¡Œã«ç›´é¢ã—ãŸã¨ãã€ã¾ãšäº‹å®Ÿã‚’æ•´ç†ã—ã¦ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—ã§è€ƒãˆã‚‹", type: "logical" },
        { id: 2, text: "æƒ…å ±ã‚’éµœå‘‘ã¿ã«ã›ãšã€å¸¸ã«ã€Œæœ¬å½“ã«ãã†ã‹?ã€ã¨ç–‘å•ã‚’æŒã¤", type: "critical" },
        { id: 3, text: "æ—¢å­˜ã®æ çµ„ã¿ã«ã¨ã‚‰ã‚ã‚Œãšã€çªé£›ãªã‚¢ã‚¤ãƒ‡ã‚¢ã‚’æ€ã„ã¤ãã“ã¨ãŒå¤šã„", type: "lateral" },
        { id: 4, text: "ä¸€ã¤ã®ãƒ†ãƒ¼ãƒã«ã¤ã„ã¦ã€ã¨ã“ã¨ã‚“æ·±ãæ˜ã‚Šä¸‹ã’ã¦è€ƒãˆã‚‹ã®ãŒå¥½ã", type: "vertical" },
        { id: 5, text: "ç‰©äº‹ã‚’å€‹åˆ¥ã§ã¯ãªãã€å…¨ä½“ã®é–¢ä¿‚æ€§ã‚„å½±éŸ¿ã‚’è€ƒãˆã‚‹", type: "system" },
        { id: 6, text: "ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚„ç›¸æ‰‹ã®ç«‹å ´ã«ç«‹ã£ã¦ã€å…±æ„Ÿã—ãªãŒã‚‰è€ƒãˆã‚‹", type: "design" },
        { id: 7, text: "ãƒ‡ãƒ¼ã‚¿ã‚„æ ¹æ‹ ã«åŸºã¥ã„ã¦ã€è«–ç†çš„ã«çµè«–ã‚’å°ãå‡ºã™", type: "logical" },
        { id: 8, text: "å‰ææ¡ä»¶ã‚„ä»®èª¬ã®å¦¥å½“æ€§ã‚’æ¤œè¨¼ã™ã‚‹ã“ã¨ã‚’é‡è¦–ã™ã‚‹", type: "critical" },
        { id: 9, text: "å¸¸è­˜çš„ãªç­”ãˆã‚ˆã‚Šã‚‚ã€ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªè§£æ±ºç­–ã‚’è€ƒãˆã‚‹ã®ãŒå¾—æ„", type: "lateral" },
        { id: 10, text: "è¡¨é¢çš„ãªç†è§£ã§ã¯ãªãã€æ ¹æœ¬åŸå› ã‚„æœ¬è³ªã‚’è¿½æ±‚ã™ã‚‹", type: "vertical" },
        { id: 11, text: "éƒ¨åˆ†æœ€é©ã§ã¯ãªãã€å…¨ä½“æœ€é©ã‚’è€ƒæ…®ã—ã¦åˆ¤æ–­ã™ã‚‹", type: "system" },
        { id: 12, text: "ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã‚’ä½œã£ã¦è©¦è¡ŒéŒ¯èª¤ã—ãªãŒã‚‰æ”¹å–„ã™ã‚‹ã®ãŒå¥½ã", type: "design" },
        { id: 13, text: "å•é¡Œè§£æ±ºã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’æ˜ç¢ºã«èª¬æ˜ã§ãã‚‹", type: "logical" },
        { id: 14, text: "å¤šæ§˜ãªè¦–ç‚¹ã‚„åå¯¾æ„è¦‹ã‚’ç©æ¥µçš„ã«å–ã‚Šå…¥ã‚Œã‚‹", type: "critical" },
        { id: 15, text: "ã‚¢ãƒŠãƒ­ã‚¸ãƒ¼(é¡ä¼¼æ€§)ã‚’ä½¿ã£ã¦ã€ç•°ãªã‚‹åˆ†é‡ã‹ã‚‰ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å€Ÿã‚Šã‚‹", type: "lateral" },
        { id: 16, text: "Why(ãªãœ)ã‚’ç¹°ã‚Šè¿”ã—ã¦ã€å•é¡Œã®æ·±å±¤ã«è¿«ã‚‹", type: "vertical" },
        { id: 17, text: "æ™‚é–“è»¸ã‚„å½±éŸ¿ç¯„å›²ã‚’è€ƒæ…®ã—ã¦ã€é•·æœŸçš„ãªè¦–ç‚¹ã§è€ƒãˆã‚‹", type: "system" },
        { id: 18, text: "å®Ÿéš›ã«ä½“é¨“ã—ãŸã‚Šè¦³å¯Ÿã—ãŸã‚Šã—ã¦ã€ã‚¤ãƒ³ã‚µã‚¤ãƒˆã‚’å¾—ã‚‹", type: "design" },
      ];

      const thinkingStyles = {
        logical: { name: "è«–ç†çš„æ€è€ƒ", description: "äº‹å®Ÿã¨ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãã€é †åºç«‹ã¦ã¦è€ƒãˆã‚‹åŠ›", scenes: "å•é¡Œè§£æ±ºã€ãƒ—ãƒ¬ã‚¼ãƒ³ã€æ„æ€æ±ºå®š" },
        critical: { name: "æ‰¹åˆ¤çš„æ€è€ƒ", description: "æƒ…å ±ã‚’éµœå‘‘ã¿ã«ã›ãšã€å¤šè§’çš„ã«æ¤œè¨¼ã™ã‚‹åŠ›", scenes: "æƒ…å ±åˆ†æã€ãƒªã‚¹ã‚¯è©•ä¾¡ã€æˆ¦ç•¥ç«‹æ¡ˆ" },
        lateral: { name: "æ°´å¹³æ€è€ƒ", description: "æ—¢å­˜ã®æ ã‚’è¶…ãˆã€å‰µé€ çš„ãªã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ç”Ÿã‚€åŠ›", scenes: "æ–°è¦äº‹æ¥­ã€å•†å“é–‹ç™ºã€ãƒ–ãƒ¬ã‚¹ãƒˆ" },
        vertical: { name: "å‚ç›´æ€è€ƒ", description: "ä¸€ã¤ã®ãƒ†ãƒ¼ãƒã‚’æ·±ãæ˜ã‚Šä¸‹ã’ã€æœ¬è³ªã«è¿«ã‚‹åŠ›", scenes: "å°‚é–€æ€§è¿½æ±‚ã€æ ¹æœ¬åŸå› åˆ†æã€ç ”ç©¶" },
        system: { name: "ã‚·ã‚¹ãƒ†ãƒ æ€è€ƒ", description: "å…¨ä½“ã®é–¢ä¿‚æ€§ã¨å½±éŸ¿ã‚’ä¿¯ç°ã—ã¦è€ƒãˆã‚‹åŠ›", scenes: "çµ„ç¹”æ”¹é©ã€ãƒ—ãƒ­ã‚»ã‚¹æ”¹å–„ã€çµŒå–¶åˆ¤æ–­" },
        design: { name: "ãƒ‡ã‚¶ã‚¤ãƒ³æ€è€ƒ", description: "å…±æ„Ÿã¨è©¦è¡ŒéŒ¯èª¤ã‚’é€šã˜ã¦ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·ã“ã™åŠ›", scenes: "UXæ”¹å–„ã€ã‚µãƒ¼ãƒ“ã‚¹è¨­è¨ˆã€é¡§å®¢ä½“é¨“" }
      };

      const handleAnswer = (value) => {
        const newAnswers = { ...answers, [currentQuestion]: value };
        setAnswers(newAnswers);

        if (currentQuestion < questions.length - 1) {
          setCurrentQuestion(currentQuestion + 1);
        } else {
          setShowResult(true);
        }
      };

      const calculateScores = () => {
        const scores = {
          logical: 0,
          critical: 0,
          lateral: 0,
          vertical: 0,
          system: 0,
          design: 0
        };

        questions.forEach((q, index) => {
          if (answers[index] !== undefined) {
            scores[q.type] += answers[index];
          }
        });

        return Object.keys(scores).map(key => ({
          subject: thinkingStyles[key].name,
          score: Math.round((scores[key] / 15) * 100),
          fullMark: 100
        }));
      };

      const getTopStyles = () => {
        const scores = calculateScores();
        return scores.sort((a, b) => b.score - a.score).slice(0, 3);
      };

      const getBottomStyles = () => {
        const scores = calculateScores();
        return scores.sort((a, b) => a.score - b.score).slice(0, 2);
      };

      const getPersonalizedAdvice = () => {
        const topStyles = getTopStyles();
        const bottomStyles = getBottomStyles();
        const allScores = calculateScores();
        const avgScore = allScores.reduce((sum, s) => sum + s.score, 0) / allScores.length;
        const isBalanced = allScores.every(s => Math.abs(s.score - avgScore) < 20);

        const adviceMap = {
          logical: {
            strength: "è«–ç†çš„æ€è€ƒãŒå¾—æ„ãªã‚ãªãŸã¯ã€è¤‡é›‘ãªå•é¡Œã‚’æ•´ç†ã—ã€èª¬å¾—åŠ›ã®ã‚ã‚‹ææ¡ˆãŒã§ãã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿åˆ†æã‚„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†ã®å½¹å‰²ã§åŠ›ã‚’ç™ºæ®ã§ãã¾ã™ã€‚",
            weakness: "è«–ç†çš„æ€è€ƒã‚’å¼·åŒ–ã™ã‚‹ã«ã¯ã€æ—¥ã€…ã®æ„æ€æ±ºå®šã§ã€Œãªãœãã†åˆ¤æ–­ã—ãŸã®ã‹ã€ã‚’è¨€èªåŒ–ã™ã‚‹ç¿’æ…£ã‚’ã¤ã‘ã¾ã—ã‚‡ã†ã€‚ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯(MECEã€ãƒ­ã‚¸ãƒƒã‚¯ãƒ„ãƒªãƒ¼ç­‰)ã®å­¦ç¿’ã‚‚ãŠã™ã™ã‚ã§ã™ã€‚",
            books: "ã€ã‚¤ã‚·ãƒ¥ãƒ¼ã‹ã‚‰ã¯ã˜ã‚ã‚ˆã€ã€ãƒ­ã‚¸ã‚«ãƒ«ãƒ»ã‚·ãƒ³ã‚­ãƒ³ã‚°ã€"
          },
          critical: {
            strength: "æ‰¹åˆ¤çš„æ€è€ƒãŒå¾—æ„ãªã‚ãªãŸã¯ã€æƒ…å ±ã®çœŸå½ã‚’è¦‹æ¥µã‚ã€ãƒªã‚¹ã‚¯ã‚’äº‹å‰ã«å¯ŸçŸ¥ã§ãã¾ã™ã€‚æ„æ€æ±ºå®šã®è³ªã‚’é«˜ã‚ã‚‹å½¹å‰²ã§è²¢çŒ®ã§ãã¾ã™ã€‚",
            weakness: "æ‰¹åˆ¤çš„æ€è€ƒã‚’é›ãˆã‚‹ã«ã¯ã€ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚„ææ¡ˆã«å¯¾ã—ã¦ã€Œå‰æã¯ä½•ã‹ã€ã€Œä»–ã®è§£é‡ˆã¯?ã€ã¨å•ã†ç¿’æ…£ã‚’ã¤ã‘ã¾ã—ã‚‡ã†ã€‚ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆã‚„å¤šæ§˜ãªæ„è¦‹ã«è§¦ã‚Œã‚‹ã“ã¨ã‚‚åŠ¹æœçš„ã§ã™ã€‚",
            books: "ã€æ­¦å™¨ã«ãªã‚‹å“²å­¦ã€ã€ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ã‚·ãƒ³ã‚­ãƒ³ã‚°å…¥é–€ã€"
          },
          lateral: {
            strength: "æ°´å¹³æ€è€ƒãŒå¾—æ„ãªã‚ãªãŸã¯ã€æ—¢å­˜ã®æ ã‚’è¶…ãˆãŸé©æ–°çš„ãªã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ç”Ÿã¿å‡ºã›ã¾ã™ã€‚æ–°è¦äº‹æ¥­ã‚„å•†å“é–‹ç™ºã§ç‹¬è‡ªã®ä¾¡å€¤ã‚’å‰µé€ ã§ãã¾ã™ã€‚",
            weakness: "æ°´å¹³æ€è€ƒã‚’ä¼¸ã°ã™ã«ã¯ã€ç•°æ¥­ç¨®ã®äº‹ä¾‹ç ”ç©¶ã‚„ã€åˆ¶ç´„ã‚’ã‚ãˆã¦è¨­ã‘ãŸãƒ–ãƒ¬ã‚¹ãƒˆã‚’è©¦ã—ã¾ã—ã‚‡ã†ã€‚ã€Œã‚‚ã—ã€œã ã£ãŸã‚‰?ã€ã¨å•ã†ãƒªãƒ•ãƒ¬ãƒ¼ãƒŸãƒ³ã‚°ã®ç·´ç¿’ã‚‚æœ‰åŠ¹ã§ã™ã€‚",
            books: "ã€æ°´å¹³æ€è€ƒã®ä¸–ç•Œã€ã€ã‚¢ã‚¤ãƒ‡ã‚¢ã®ã¡ã‹ã‚‰ã€"
          },
          vertical: {
            strength: "å‚ç›´æ€è€ƒãŒå¾—æ„ãªã‚ãªãŸã¯ã€ç‰©äº‹ã®æœ¬è³ªã‚’è¦‹æŠœãã€å°‚é–€æ€§ã‚’æ·±ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚æ ¹æœ¬åŸå› ã®ç©¶æ˜ã‚„å°‚é–€åˆ†é‡ã®æ¢æ±‚ã§åŠ›ã‚’ç™ºæ®ã—ã¾ã™ã€‚",
            weakness: "å‚ç›´æ€è€ƒã‚’ç£¨ãã«ã¯ã€èˆˆå‘³ã®ã‚ã‚‹ãƒ†ãƒ¼ãƒã§ã€Œãªãœ?ã€ã‚’5å›ç¹°ã‚Šè¿”ã™ç·´ç¿’ã‚’ã—ã¾ã—ã‚‡ã†ã€‚ä¸€æ¬¡æƒ…å ±ã«ã‚ãŸã‚Šã€æ·±ãå­¦ã¶å§¿å‹¢ãŒé‡è¦ã§ã™ã€‚",
            books: "ã€ã‚¤ã‚·ãƒ¥ãƒ¼ã‹ã‚‰ã¯ã˜ã‚ã‚ˆã€ã€ãªãœ?ã‚’5å›ç¹°ã‚Šè¿”ã™æŠ€è¡“ã€"
          },
          system: {
            strength: "ã‚·ã‚¹ãƒ†ãƒ æ€è€ƒãŒå¾—æ„ãªã‚ãªãŸã¯ã€å…¨ä½“åƒã‚’ä¿¯ç°ã—ã€æœ€é©ãªè§£æ±ºç­–ã‚’å°ã‘ã¾ã™ã€‚çµ„ç¹”æ”¹é©ã‚„ãƒ—ãƒ­ã‚»ã‚¹æ”¹å–„ã§å¤§ããªå½±éŸ¿ã‚’ä¸ãˆã‚‰ã‚Œã¾ã™ã€‚",
            weakness: "ã‚·ã‚¹ãƒ†ãƒ æ€è€ƒã‚’å¼·åŒ–ã™ã‚‹ã«ã¯ã€å› æœãƒ«ãƒ¼ãƒ—å›³ã‚’æãç·´ç¿’ã‚„ã€æ™‚é–“è»¸ã‚’åºƒã’ã¦å½±éŸ¿ã‚’è€ƒãˆã‚‹ç¿’æ…£ã‚’ã¤ã‘ã¾ã—ã‚‡ã†ã€‚çµ„ç¹”ã‚„è‡ªç„¶ã®ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰å­¦ã¶ã“ã¨ã‚‚æœ‰åŠ¹ã§ã™ã€‚",
            books: "ã€ã‚·ã‚¹ãƒ†ãƒ æ€è€ƒã€ã€å­¦ç¿’ã™ã‚‹çµ„ç¹”ã€"
          },
          design: {
            strength: "ãƒ‡ã‚¶ã‚¤ãƒ³æ€è€ƒãŒå¾—æ„ãªã‚ãªãŸã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¯„ã‚Šæ·»ã„ã€è©¦è¡ŒéŒ¯èª¤ã‚’é€šã˜ã¦ä¾¡å€¤ã‚’å‰µé€ ã§ãã¾ã™ã€‚é¡§å®¢ä½“é¨“ã®å‘ä¸Šã‚„æ–°ã‚µãƒ¼ãƒ“ã‚¹è¨­è¨ˆã§æ´»èºã§ãã¾ã™ã€‚",
            weakness: "ãƒ‡ã‚¶ã‚¤ãƒ³æ€è€ƒã‚’ä¼¸ã°ã™ã«ã¯ã€å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦³å¯Ÿã‚„ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ã‚’å®Ÿè·µã—ã¾ã—ã‚‡ã†ã€‚å°ã•ãªãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã‚’ç´ æ—©ãä½œã‚Šã€ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å¾—ã‚‹çµŒé¨“ãŒé‡è¦ã§ã™ã€‚",
            books: "ã€ãƒ‡ã‚¶ã‚¤ãƒ³æ€è€ƒãŒä¸–ç•Œã‚’å¤‰ãˆã‚‹ã€ã€UXãƒ‡ã‚¶ã‚¤ãƒ³ã®æ•™ç§‘æ›¸ã€"
          }
        };

        const advice = {
          strengths: [],
          improvements: [],
          balance: "",
          recommendations: []
        };

        topStyles.slice(0, 2).forEach(style => {
          const key = Object.keys(thinkingStyles).find(k => thinkingStyles[k].name === style.subject);
          if (adviceMap[key]) {
            advice.strengths.push({
              name: style.subject,
              text: adviceMap[key].strength,
              books: adviceMap[key].books
            });
          }
        });

        bottomStyles.forEach(style => {
          const key = Object.keys(thinkingStyles).find(k => thinkingStyles[k].name === style.subject);
          if (adviceMap[key] && style.score < 60) {
            advice.improvements.push({
              name: style.subject,
              text: adviceMap[key].weakness,
              books: adviceMap[key].books
            });
          }
        });

        if (isBalanced) {
          advice.balance = "å…¨ã¦ã®æ€è€ƒæ³•ãŒãƒãƒ©ãƒ³ã‚¹è‰¯ãç™ºé”ã—ã¦ã„ã¾ã™ã€‚çŠ¶æ³ã«å¿œã˜ã¦é©åˆ‡ãªæ€è€ƒæ³•ã‚’ä½¿ã„åˆ†ã‘ã‚‰ã‚Œã‚‹æŸ”è»Ÿæ€§ã‚’æŒã£ã¦ã„ã¾ã™ã€‚";
        } else if (topStyles[0].score - bottomStyles[0].score > 40) {
          advice.balance = "ç‰¹å®šã®æ€è€ƒæ³•ã«å¼·ã¿ãŒåã£ã¦ã„ã¾ã™ã€‚å¾—æ„åˆ†é‡ã‚’æ´»ã‹ã—ã¤ã¤ã€è‹¦æ‰‹ãªæ€è€ƒæ³•ã‚’è£œå®Œã§ãã‚‹ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã¨å”åŠ›ã™ã‚‹ã¨åŠ¹æœçš„ã§ã™ã€‚";
        } else {
          advice.balance = "æ€è€ƒæ³•ã«ã‚ã‚‹ç¨‹åº¦ã®åã‚ŠãŒã‚ã‚Šã¾ã™ãŒã€å­¦ç¿’ã«ã‚ˆã£ã¦å¹…ã‚’åºƒã’ã‚‹ä½™åœ°ãŒã‚ã‚Šã¾ã™ã€‚";
        }

        if (topStyles[0].subject === "è«–ç†çš„æ€è€ƒ" || topStyles[0].subject === "æ‰¹åˆ¤çš„æ€è€ƒ") {
          advice.recommendations.push("åˆ†æç³»ã®æ¥­å‹™ã‚„ãƒ¬ãƒ“ãƒ¥ãƒ¼å½¹ã§åŠ›ã‚’ç™ºæ®ã§ãã¾ã™");
          advice.recommendations.push("æ™‚ã«ã¯ç›´æ„Ÿã‚„å‰µé€ æ€§ã‚‚å–ã‚Šå…¥ã‚Œã¦ã¿ã¾ã—ã‚‡ã†");
        }
        if (topStyles[0].subject === "æ°´å¹³æ€è€ƒ" || topStyles[0].subject === "ãƒ‡ã‚¶ã‚¤ãƒ³æ€è€ƒ") {
          advice.recommendations.push("ã‚¢ã‚¤ãƒ‡ã‚¢å‰µå‡ºã‚„ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³æ¨é€²ã®å½¹å‰²ãŒé©ã—ã¦ã„ã¾ã™");
          advice.recommendations.push("å®Ÿè¡Œæ™‚ã«ã¯è«–ç†çš„ãªæ¤œè¨¼ã‚‚çµ„ã¿åˆã‚ã›ã¾ã—ã‚‡ã†");
        }
        if (topStyles.some(s => s.subject === "ã‚·ã‚¹ãƒ†ãƒ æ€è€ƒ")) {
          advice.recommendations.push("å…¨ä½“æœ€é©ã®è¦–ç‚¹ã§ã€çµ„ç¹”æ¨ªæ–­çš„ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«è²¢çŒ®ã§ãã¾ã™");
        }

        return advice;
      };

      const reset = () => {
        setCurrentQuestion(0);
        setAnswers({});
        setShowResult(false);
      };

      const getDateString = () => {
        const now = new Date();
        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, '0');
        const day = String(now.getDate()).padStart(2, '0');
        return `${year}-${month}-${day}`;
      };

      const downloadAsImage = async () => {
        if (!resultRef.current) return;

        try {
          const canvas = await html2canvas(resultRef.current, {
            scale: 2,
            backgroundColor: '#ffffff',
            logging: false,
          });
          
          const link = document.createElement('a');
          link.download = `æ€è€ƒæ³•è¨ºæ–­çµæœ_${getDateString()}.png`;
          link.href = canvas.toDataURL('image/png');
          link.click();
        } catch (error) {
          console.error('ç”»åƒã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ:', error);
          alert('ç”»åƒã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚');
        }
      };

      if (showResult) {
        const chartData = calculateScores();
        const topStyles = getTopStyles();
        const personalAdvice = getPersonalizedAdvice();

        return (
          <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-8">
            <div className="max-w-4xl mx-auto">
              <div ref={resultRef} className="bg-white rounded-2xl shadow-xl p-8">
                <div className="flex items-center gap-3 mb-6">
                  <Brain className="w-8 h-8 text-indigo-600" />
                  <h1 className="text-3xl font-bold text-gray-800">è¨ºæ–­çµæœ</h1>
                  <span className="ml-auto text-sm text-gray-500">{getDateString()}</span>
                </div>

                <div className="mb-8">
                  <ResponsiveContainer width="100%" height={400}>
                    <RadarChart data={chartData}>
                      <PolarGrid />
                      <PolarAngleAxis dataKey="subject" />
                      <PolarRadiusAxis angle={90} domain={[0, 100]} />
                      <Radar name="ã‚ãªãŸã®æ€è€ƒã‚¹ã‚¿ã‚¤ãƒ«" dataKey="score" stroke="#4f46e5" fill="#4f46e5" fillOpacity={0.6} />
                    </RadarChart>
                  </ResponsiveContainer>
                </div>

                <div className="bg-indigo-50 rounded-lg p-6 mb-6">
                  <h2 className="text-xl font-bold text-gray-800 mb-4">ã‚ãªãŸã®å¾—æ„ãªæ€è€ƒæ³• TOP3</h2>
                  <div className="space-y-4">
                    {topStyles.map((style, index) => {
                      const key = Object.keys(thinkingStyles).find(k => thinkingStyles[k].name === style.subject);
                      const info = thinkingStyles[key];
                      return (
                        <div key={index} className="bg-white rounded-lg p-4">
                          <div className="flex items-center justify-between mb-2">
                            <h3 className="font-bold text-lg text-indigo-600">
                              {index + 1}ä½: {style.subject}
                            </h3>
                            <span className="text-2xl font-bold text-indigo-600">{style.score}%</span>
                          </div>
                          <p className="text-gray-600 text-sm mb-2">{info.description}</p>
                          <p className="text-gray-500 text-xs">
                            <span className="font-semibold">æ´»ç”¨ã‚·ãƒ¼ãƒ³:</span> {info.scenes}
                          </p>
                        </div>
                      );
                    })}
                  </div>
                </div>

                <div className="bg-green-50 border border-green-200 rounded-lg p-6 mb-6">
                  <h2 className="text-xl font-bold text-green-800 mb-4">ğŸ’ª ã‚ãªãŸã®å¼·ã¿ã‚’æ´»ã‹ã™ã‚¢ãƒ‰ãƒã‚¤ã‚¹</h2>
                  <div className="space-y-4">
                    {personalAdvice.strengths.map((item, index) => (
                      <div key={index} className="bg-white rounded-lg p-4">
                        <h3 className="font-bold text-green-700 mb-2">{item.name}</h3>
                        <p className="text-gray-700 text-sm mb-2">{item.text}</p>
                        <p className="text-xs text-gray-500">
                          <span className="font-semibold">ğŸ“š ãŠã™ã™ã‚æ›¸ç±:</span> {item.books}
                        </p>
                      </div>
                    ))}
                  </div>
                </div>

                {personalAdvice.improvements.length > 0 && (
                  <div className="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6">
                    <h2 className="text-xl font-bold text-blue-800 mb-4">ğŸŒ± æˆé•·ã®ãŸã‚ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹</h2>
                    <div className="space-y-4">
                      {personalAdvice.improvements.map((item, index) => (
                        <div key={index} className="bg-white rounded-lg p-4">
                          <h3 className="font-bold text-blue-700 mb-2">{item.name}</h3>
                          <p className="text-gray-700 text-sm mb-2">{item.text}</p>
                          <p className="text-xs text-gray-500">
                            <span className="font-semibold">ğŸ“š ãŠã™ã™ã‚æ›¸ç±:</span> {item.books}
                          </p>
                        </div>
                      ))}
                    </div>
                  </div>
                )}

                <div className="bg-purple-50 border border-purple-200 rounded-lg p-6 mb-6">
                  <h2 className="text-xl font-bold text-purple-800 mb-3">ğŸ¯ ç·åˆçš„ãªã‚¢ãƒ‰ãƒã‚¤ã‚¹</h2>
                  <p className="text-gray-700 text-sm mb-4">{personalAdvice.balance}</p>
                  {personalAdvice.recommendations.length > 0 && (
                    <div className="bg-white rounded-lg p-4">
                      <h3 className="font-semibold text-purple-700 mb-2">å®Ÿè·µã®ãƒ’ãƒ³ãƒˆ:</h3>
                      <ul className="space-y-1">
                        {personalAdvice.recommendations.map((rec, index) => (
                          <li key={index} className="text-sm text-gray-700">â€¢ {rec}</li>
                        ))}
                      </ul>
                    </div>
                  )}
                </div>

                <div className="bg-gray-50 rounded-lg p-6 mb-6">
                  <h2 className="text-xl font-bold text-gray-800 mb-4">å…¨ã¦ã®æ€è€ƒæ³•ã«ã¤ã„ã¦</h2>
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                    {Object.keys(thinkingStyles).map(key => {
                      const style = thinkingStyles[key];
                      const score = chartData.find(d => d.subject === style.name)?.score || 0;
                      return (
                        <div key={key} className="bg-white rounded-lg p-4 border border-gray-200">
                          <div className="flex justify-between items-center mb-2">
                            <h3 className="font-bold text-gray-800">{style.name}</h3>
                            <span className="text-sm font-semibold text-gray-600">{score}%</span>
                          </div>
                          <div className="w-full bg-gray-200 rounded-full h-2 mb-2">
                            <div className="bg-indigo-600 h-2 rounded-full" style={{ width: `${score}%` }}></div>
                          </div>
                          <p className="text-xs text-gray-600">{style.description}</p>
                        </div>
                      );
                    })}
                  </div>
                </div>

                <div className="bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6">
                  <h3 className="font-bold text-amber-800 mb-2">ğŸ’¡ æ´»ç”¨ã®ãƒ’ãƒ³ãƒˆ</h3>
                  <ul className="text-sm text-amber-900 space-y-1">
                    <li>â€¢ å¾—æ„ãªæ€è€ƒæ³•ã‚’æ´»ã‹ã—ã¦ã€ãƒãƒ¼ãƒ å†…ã§ã®å½¹å‰²ã‚’æ˜ç¢ºã«ã—ã¾ã—ã‚‡ã†</li>
                    <li>â€¢ è‹¦æ‰‹ãªæ€è€ƒæ³•ã¯ã€ãã‚ŒãŒå¾—æ„ãªåŒåƒšã¨å”åŠ›ã™ã‚‹ã“ã¨ã§è£œå®Œã§ãã¾ã™</li>
                    <li>â€¢ æ„è­˜çš„ã«è‹¦æ‰‹ãªæ€è€ƒæ³•ã‚’ä½¿ã†ç·´ç¿’ã‚’ã™ã‚‹ã“ã¨ã§ã€æ€è€ƒã®å¹…ãŒåºƒãŒã‚Šã¾ã™</li>
                  </ul>
                </div>
              </div>

              <div className="mt-6 flex gap-4">
                <button
                  onClick={downloadAsImage}
                  className="flex-1 bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 transition flex items-center justify-center gap-2"
                >
                  <Download className="w-5 h-5" />
                  çµæœã‚’ä¿å­˜(PNG)
                </button>
                <button
                  onClick={reset}
                  className="flex-1 bg-indigo-600 text-white py-3 rounded-lg font-semibold hover:bg-indigo-700 transition flex items-center justify-center gap-2"
                >
                  <RefreshCw className="w-5 h-5" />
                  ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹
                </button>
              </div>
            </div>
          </div>
        );
      }

      const progress = ((currentQuestion + 1) / questions.length) * 100;

      return (
        <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-8">
          <div className="max-w-2xl mx-auto">
            <div className="bg-white rounded-2xl shadow-xl p-8">
              <div className="flex items-center gap-3 mb-6">
                <Brain className="w-8 h-8 text-indigo-600" />
                <h1 className="text-3xl font-bold text-gray-800">æ€è€ƒæ³•è¨ºæ–­ãƒ„ãƒ¼ãƒ«</h1>
              </div>

              <div className="mb-8">
                <div className="flex justify-between text-sm text-gray-600 mb-2">
                  <span>è³ªå• {currentQuestion + 1} / {questions.length}</span>
                  <span>{Math.round(progress)}%</span>
                </div>
                <div className="w-full bg-gray-200 rounded-full h-2">
                  <div 
                    className="bg-indigo-600 h-2 rounded-full transition-all duration-300"
                    style={{ width: `${progress}%` }}
                  ></div>
                </div>
              </div>

              <div className="mb-8">
                <div className="bg-indigo-50 rounded-lg p-6 mb-6">
                  <p className="text-lg text-gray-800 font-medium">
                    {questions[currentQuestion].text}
                  </p>
                </div>

                <div className="space-y-3">
                  {[
                    { value: 5, label: "éå¸¸ã«å½“ã¦ã¯ã¾ã‚‹" },
                    { value: 4, label: "ã‚„ã‚„å½“ã¦ã¯ã¾ã‚‹" },
                    { value: 3, label: "ã©ã¡ã‚‰ã¨ã‚‚ã„ãˆãªã„" },
                    { value: 2, label: "ã‚ã¾ã‚Šå½“ã¦ã¯ã¾ã‚‰ãªã„" },
                    { value: 1, label: "å…¨ãå½“ã¦ã¯ã¾ã‚‰ãªã„" }
                  ].map(option => (
                    <button
                      key={option.value}
                      onClick={() => handleAnswer(option.value)}
                      className="w-full bg-white border-2 border-gray-200 rounded-lg p-4 text-left hover:border-indigo-600 hover:bg-indigo-50 transition flex items-center justify-between group"
                    >
                      <span className="text-gray-700 group-hover:text-indigo-700 font-medium">
                        {option.label}
                      </span>
                      <ArrowRight className="w-5 h-5 text-gray-400 group-hover:text-indigo-600" />
                    </button>
                  ))}
                </div>
              </div>

              {currentQuestion > 0 && (
                <button
                  onClick={() => setCurrentQuestion(currentQuestion - 1)}
                  className="text-indigo-600 hover:text-indigo-700 text-sm font-medium"
                >
                  â† å‰ã®è³ªå•ã«æˆ»ã‚‹
                </button>
              )}
            </div>
          </div>
        </div>
      );
    };

    ReactDOM.render(<ThinkingStyleAssessment />, document.getElementById('root'));
  </script>
</body>
</html>